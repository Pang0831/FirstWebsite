<div class="container py-5">
    <div class="row mb-5">
        <div class="col-12 text-center reveal-wrapper" style="--delay: 1;">
            <h6 class="small fw-bold text-muted mb-2">GRAPHIC DESIGN</h6>
            <h2 class="fw-bold mb-5">Internship Poster Series</h2>
        </div>
    </div>

    <div class="row g-4 mb-5 pb-5">
        @for (int i = 1; i <= 18; i++)
        {
            // This math keeps the delay between 1 and 4
            // Result sequence: 1, 2, 3, 4, 1, 2, 3, 4...
            int cappedDelay = ((i - 1) % 4) + 1;

            <div class="col-6 col-md-4 col-lg-3 reveal-wrapper" style="--delay: @(cappedDelay);">
                <div class="zigzag-img-wrapper shadow-sm rounded-3">
                    <img src="/images/posters_video/P@(i).png"
                         class="img-fluid w-100 p-2 pointer-zoom"
                         onclick="openLightbox(this.src)"
                         alt="Internship Poster @i">
                </div>
            </div>
        }
    </div>

    <hr class="my-5" style="opacity: 0.1;">

    <div class="row align-items-center py-5">
        <div class="col-md-5 reveal-wrapper" style="--delay: 1;">
            <h6 class="small fw-bold text-danger mb-2">VIDEO EDITING</h6>
            <h2 class="fw-bold mb-4">Localization & Storytelling</h2>
            <p class="text-muted">
                Enhanced school outreach by editing promotional course videos and localizing English content with Chinese subtitles to engage a broader audience.
            </p>

            <div class="mt-5 pt-4 border-top">
                <h6 class="small fw-bold text-muted mb-2">LEGAL NOTICE</h6>
                <p class="small text-muted italic">
                    All projects shown were created during my internship at Raffles American School.
                    Copyright belongs to the institution; works are displayed here for portfolio purposes only.
                </p>
            </div>
        </div>

        <div class="col-md-7 reveal-wrapper" style="--delay: 2;">
            <div class="row g-3">
                <div class="col-6">
                    <div class="zigzag-img-wrapper shadow-sm rounded-3 overflow-hidden">
                        <img src="/images/posters_video/v1.png" class="img-fluid" alt="Video Project 1">
                    </div>
                </div>
                <div class="col-6">
                    <div class="zigzag-img-wrapper shadow-sm rounded-3 overflow-hidden">
                        <img src="/images/posters_video/v2.png" class="img-fluid" alt="Video Project 2">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* 1. The Initial Hidden State */
    .reveal-wrapper {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease-out;
        /* This ensures the delay is applied based on your inline style */
        transition-delay: calc(var(--delay) * 0.2s);
    }
        /* .reveal-wrapper {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1); */
        /* Capping the delay ensures this never gets too high */
        /*     transition-delay: calc(var(--delay) * 0.1s);
        } */

        /* 2. The Visible State (Triggered by JS) */
        .reveal-wrapper.active {
            opacity: 1;
            transform: translateY(0);
        }

    /* Keep your existing hover effects below */
    .browser-mockup {
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        background: #fff;
    }

        .browser-mockup:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: 0 30px 60px rgba(0,0,0,0.12) !important;
        }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const observerOptions = {
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("active");
                } else {
                    entry.target.classList.remove("active");
                }
            });
        }, observerOptions);

        // Corrected selection and loop
        const revealElements = document.querySelectorAll(".reveal-wrapper");
        revealElements.forEach((el) => {
            observer.observe(el);
        });
    });
</script>