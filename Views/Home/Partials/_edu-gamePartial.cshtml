@model FirstWebsite.Models.Project

<style>
    /* Minimalist Accents */
    .step-number {
        font-family: serif;
        font-style: italic;
        font-size: 1.2rem;
        opacity: 0.3;
    }

    .game-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease; /* Ensure smooth transitions */
        border: none;
        background: #fdfdfd;
        cursor: pointer;
    }

        .game-card:hover {
            transform: translateY(-10px) !important; /* Slightly stronger lift on hover */
            box-shadow: 0 15px 30px rgba(0,0,0,0.1) !important;
        }

    /* Initial hidden state: slightly lower and invisible */
    /* Scroll Reveal Styles */
    .reveal-wrapper {
        opacity: 0;
        transform: translateY(40px);
        transition: all 0.9s cubic-bezier(0.215, 0.61, 0.355, 1);
        /* Note: We removed the transition-delay from here so it resets cleanly */
    }

        .reveal-wrapper.active {
            opacity: 1;
            transform: translateY(0);
            /* Staggered delay only applies when becoming active */
            transition-delay: calc(var(--delay) * 0.2s);
        }

        /* Optional: Smooth transition for when it fades OUT */
        .reveal-wrapper:not(.active) {
            transition: all 0.5s ease;
            transition-delay: 0s; /* No delay when disappearing */
        }

    .video-glow {
        position: relative;
    }
        /* Creates a soft minimalist shadow behind the video */
        .video-glow::before {
            content: "";
            position: absolute;
            top: 10%;
            left: 10%;
            width: 80%;
            height: 80%;
            background: #e9ecef;
            filter: blur(60px);
            z-index: -1;
        }

    /* Container for the 8-image grid */
    .step-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
    }

    /* Minimalist Image Styling */
    .step-image-wrapper {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        background-color: #f8f9fa; /* Light grey placeholder */
        transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

        .step-image-wrapper img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.6s ease;
        }

        /* Subtle Hover: Image zooms slightly and shadow deepens */
        .step-image-wrapper:hover {
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
            transform: translateY(-5px);
        }

            .step-image-wrapper:hover img {
                transform: scale(1.03);
            }

    /* Captions underneath */
    .step-caption {
        font-size: 0.9rem;
        color: #6c757d;
        margin-top: 1rem;
        line-height: 1.6;
    }

    /* Adds a subtle line animation to the cards */
    .border-start {
        border-left: 3px solid #000 !important; /* Minimalist black accent */
        transition: border-color 0.3s ease;
    }

        .border-start:hover {
            border-color: #0d6efd !important; /* Changes to blue on hover */
        }

</style>

<div class="container py-5 text-center">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <h3 class="display-6 fw-bold mb-4">Gameplay Preview</h3>
            <div class="video-glow mb-4">
                <div class="rounded-4 overflow-hidden shadow-lg">
                    <video controls class="w-100 d-block" style="max-height: 600px; object-fit: cover;">
                        <source src="~/videos/Education.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
            </div>
            <p class="lead text-muted mx-auto" style="max-width: 700px;">
                A "learning-through-play" loop designed to keep students engaged through immersive mechanics.
            </p>
        </div>
    </div>
</div>

<hr class="my-5 opacity-10">

<div class="container">
    <div class="row mb-5">
        <div class="col-12 text-center">
            <h4 class="fw-bold">Interface & Functionality</h4>
            <p class="text-muted">Master the controls with these 8 essential steps.</p>
        </div>
    </div>

    @{
        var steps = new[] {
        new { Title = "Home Screen", Desc = "The starting point for users.", Img = "step1.png" },
        new { Title = "Learn", Desc = "Helps the users to enhance their memories.", Img = "step2.png" },
        new { Title = "Home Button", Desc = "At every last page, provide a home button to choose a new game.", Img = "step3.png" },
        new { Title = "Colour", Desc = "Provide two different section for users.", Img = "step4.png" },
        new { Title = "Introduction for Color the shapes", Desc = "Users will know the rule of the related section.", Img = "step5.png" },
        new { Title = "Color the shapes", Desc = "Color the color shapes by using the specific color.", Img = "step6.png" },
        new { Title = "Introduction for Color and Count", Desc = "Users will know the rule of the related section.", Img = "step7.png" },
        new { Title = "Color & Count", Desc = "Use specific color to color the shapes and fill the correct numbers.", Img = "step8.png" }
        };
    }

    <div class="container">
        <div class="row g-4">
            @for (int i = 0; i < steps.Length; i++)
            {
                <div class="col-md-6 reveal-wrapper" style="--delay: @(i % 2);">
                    <div class="game-card p-4 rounded-4 shadow-sm h-100">
                        <span class="step-number">Step 0@(i + 1)</span>
                        <div class="rounded-3 overflow-hidden mb-3 mt-2">
                            <img src="~/images/contents/@steps[i].Img" class="img-fluid" alt="@steps[i].Title" loading="lazy">
                        </div>
                        <h5 class="fw-bold">@steps[i].Title</h5>
                        <p class="small text-muted mb-0">@steps[i].Desc</p>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<div class="container py-5 mt-5">
    <div class="row">
        <div class="col-12">
            <h3 class="small fw-bold text-muted mb-4" style="letter-spacing: 2px; text-transform: uppercase;">Technical Pipeline</h3>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-md-4">
            <div class="border-start ps-4 py-2">
                <h5 class="fw-bold">Unity Engine</h5>
                <p class="text-muted small">Implemented the core gameplay loop and C# scripting for interactive educational elements and UI logic.</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="border-start ps-4 py-2">
                <h5 class="fw-bold">Blender</h5>
                <p class="text-muted small">Modeled and textured all 3D assets, ensuring low-poly optimization for smooth performance in-browser/on-mobile.</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="border-start ps-4 py-2">
                <h5 class="fw-bold">Adobe Creative Suite</h5>
                <p class="text-muted small">Utilized Illustrator and Photoshop for UI/UX elements, focusing on high-readability icons for young learners.</p>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: "0px 0px -50px 0px"
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Re-add the class when it enters the screen
                    entry.target.classList.add("active");
                } else {
                    // Remove the class when it leaves the screen
                    entry.target.classList.remove("active");
                }
            });
        }, observerOptions);

        const revealElements = document.querySelectorAll(".reveal-wrapper");
        revealElements.forEach(el => observer.observe(el));
    });
</script>